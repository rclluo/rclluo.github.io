<head>
    <link id="pagestyle" rel="stylesheet" href="dark.css" />
    <style>
        @keyframes flash {
            0% {
                filter: brightness(1);
            }
            33% {
                filter: brightness(1.66);
            }
            50% {
                filter: brightness(2);
            }
            66% {
                filter: brightness(1.66);
            }
            100% {
                filter: brightness(1);
            }
        }
        @keyframes bounce {
            0% {
                transform: scale(1)
            }
            33% {
                transform: scale(1.1)
            }
            50% {
                transform: scale(1)
            }
            66% {
                transform: scale(0.9)
            }
            100% {
                transform: scale(1)
            }
        }
        @keyframes activate {
            0% {
                filter: invert(0);
            }
            50% {
                filter: invert(1);
            }
            100% {
                filter: invert(0);
            }
        }
        img {
            filter: invert(0);
        }
        .upgrade {
            width: 100px;
            height: 100px;
        }
    </style>
</head>
<body>
    <bigglow id="score">Loading...</bigglow><smallglow>Energy</smallglow>
    <br>
    <script>
        function getCookie(cname) {
            var name = cname + '=';
            var decodedCookie = decodeURIComponent(document.cookie);
            var ca = decodedCookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                }
            }
            return '';
        }
        function setCookie(cname, value) {
            document.cookie = cname + '=' + value + ';';
        }
        if (isNaN(getCookie('score')) || getCookie('score')=='') {
            var score = 0;
        } else {
            var score = parseInt(getCookie('score'));
        }
        if (isNaN(getCookie('atoms')) || getCookie('atoms')=='') {
            var atoms = 0;
        } else {
            var atoms = parseInt(getCookie('atoms'));
        }
        if (isNaN(getCookie('molecules')) || getCookie('molecules')=='') {
            var molecules = 0;
        } else {
            var molecules = parseInt(getCookie('molecules'));
        }
        setInterval(function () {
            setCookie('score',score);
            setCookie('atoms',atoms);
            setCookie('molecules',molecules);
        }, 5000);
        setInterval(function () {
            document.getElementById('score').innerHTML = score;
            document.getElementById('atom-cost').innerHTML = Math.floor(10 * 1.15 ** atoms);
            document.getElementById('molecule-cost').innerHTML = Math.floor(100 * 1.15 ** atoms);
        }, 100)
        setInterval(function () {
            score = score + atoms;
            document.getElementById('atom-button').style.animation = 'activate '+1000+'ms';
            setTimeout(()=>{
                document.getElementById('atom-button').style.animation = '';
            }, 1000);
        }, 5000)
        setInterval(function () {
            score = score + 5 * molecules;
            document.getElementById('molecule-button').style.animation = 'activate '+700+'ms';
            setTimeout(()=>{
                document.getElementById('molecule-button').style.animation = '';
            }, 700);
        }, 2000)
        let clickActive = false;
        let atomClickActive = false;
    </script>
    <img src="https://media0.giphy.com/media/l5JbspfwZ0yjHjlJ0K/giphy.gif?cid=6c09b952kz543h1610f03nynl918hf6w4luwstdtg8zzr0h6" alt="World" onclick="  
        score = score + 1;
        if (!clickActive) {
            clickActive = true;
            this.style.animation = 'flash '+150+'ms';
            setTimeout(()=>{
                this.style.animation = '';
                clickActive = false;
            }, 150);
        }
    ">
    <br>
    <img src="atom.gif" class="upgrade" alt="Atom" id="atom-button" onclick="
        if (score >= parseInt(document.getElementById('atom-cost').innerHTML)) {
            score = score - parseInt(document.getElementById('atom-cost').innerHTML);
            atoms = atoms + 1;
        }
        if (!atomClickActive) {
            atomClickActive = true;
            this.style.animation = 'bounce '+150+'ms';
            setTimeout(()=>{
                this.style.animation = '';
                atomClickActive = false;
            }, 150);
        }
    "><bigglow>Atom        Cost: </bigglow><bigdanger id="atom-cost">Loading...</bigdanger>
    <br>
    <img src="molecule.gif" class="upgrade" alt="Molecule" id="molecule-button" onclick="
    if (score >= parseInt(document.getElementById('molecule-cost').innerHTML)) {
        score = score - parseInt(document.getElementById('molecule-cost').innerHTML);
        atoms = atoms + 1;
    }
    if (!atomClickActive) {
        atomClickActive = true;
        this.style.animation = 'bounce '+150+'ms';
        setTimeout(()=>{
            this.style.animation = '';
            atomClickActive = false;
        }, 150);
    }
"><bigglow>Molecule        Cost: </bigglow><bigdanger id="molecule-cost">Loading...</bigdanger>
</body>
